# HTTP Configuration
quarkus.http.port=8081

# CORS Configuration - allow Authorization header
quarkus.http.cors=true
quarkus.http.cors.origins=http://localhost:3000,http://127.0.0.1:3000,http://localhost:5500,http://127.0.0.1:5500
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=Content-Type,Authorization
quarkus.http.cors.exposed-headers=*
quarkus.http.cors.access-control-max-age=24H

# JWT Authentication - Clerk
mp.jwt.verify.publickey.location=https://cheerful-raccoon-70.clerk.accounts.dev/.well-known/jwks.json
mp.jwt.verify.publickey.algorithm=RS256
mp.jwt.verify.issuer=https://cheerful-raccoon-70.clerk.accounts.dev

# Protect WebSocket endpoint
quarkus.http.auth.permission.websocket.paths=/ws/*
quarkus.http.auth.permission.websocket.policy=authenticated

# REST Client to mdb-service
quarkus.rest-client.document-service.url=http://localhost:8080

# Enable JWT token propagation to downstream services (mdb-service)
quarkus.rest-client.document-service.providers=io.quarkus.oidc.token.propagation.JsonWebTokenRequestFilter

# Debug logging (remove in production)
quarkus.log.category."io.quarkus.smallrye.jwt".level=DEBUG
quarkus.log.category."io.quarkus.security".level=DEBUG
quarkus.log.category."com.splitttr.collab".level=DEBUG
